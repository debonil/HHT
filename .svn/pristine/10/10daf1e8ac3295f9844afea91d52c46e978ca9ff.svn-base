<ion-header>
  <ion-navbar color="primary">
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>EFT</ion-title>
    <ion-buttons end>
      <a ion-button icon-only (click)="close()">
        <ion-icon name="close"></ion-icon>
      </a>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <ion-card>
    <ion-list>
      <ion-item>  
          <ion-label color=primary>EFT</ion-label>
          <ion-input type="text" placeholder ="PNR No" [(ngModel)]="EFT.PNR_NO" required maxlength = "10"></ion-input>
      </ion-item>
      <b ion-text *ngIf = "EFT.ERRORS.PNR_NO" color=danger>{{ EFT.ERRORS.PNR_NO }}</b>

      <ion-item>
        <ion-label color=primary>COACH_ID</ion-label>
        <ion-select [(ngModel)]="EFT.COACH_ID" (ionChange)="updateCoach()">
          <ion-option *ngFor="let coach of coachArr  ; let i = index;" [value]="coach.COACH_ID">{{ coach.COACH_ID }}</ion-option>
        </ion-select>
      </ion-item>
      <b ion-text *ngIf = "EFT.ERRORS.COACH_ID" color=danger>{{ EFT.ERRORS.COACH_ID }}</b>
        
      <ion-item>
        <ion-label color=primary>FROM:</ion-label>
        <ion-select [(ngModel)]= "EFT.FROM">
          <ion-option *ngFor="let isl of islArr  ; let i = index;" [value]="isl">{{ isl.STN_CODE }}</ion-option>
        </ion-select>
      </ion-item>
      <b ion-text *ngIf = "EFT.ERRORS.SELECT_STATION" color=danger>{{ EFT.ERRORS.SELECT_STATION }}</b>
      <ion-item>
        <ion-label color=primary>TO:</ion-label>
        <ion-select [(ngModel)]= "EFT.TO">
          <ion-option *ngFor="let isl of islArr  ; let i = index;" [value]="isl">{{ isl.STN_CODE }}</ion-option>
        </ion-select>
      </ion-item>

      <ion-item>
        <ion-label color=primary>REASON:</ion-label>
        <ion-input type="text" [(ngModel)] = "EFT.REASON"></ion-input>
      </ion-item>
      <b ion-text *ngIf = "EFT.ERRORS.REASON" color=danger>{{ EFT.ERRORS.REASON }}</b>

      <ion-item>
        <ion-label color=primary>FARE:</ion-label>
        <ion-input placeholder = FARE type="number" [(ngModel)]="EFT.FARE"></ion-input>
      </ion-item>
      <b ion-text *ngIf = "EFT.ERRORS.FARE" color=danger>{{ EFT.ERRORS.FARE }}</b>

      <ion-item>
        <ion-label color=primary>EXCESS FARE:</ion-label>
        <ion-input placeholder = EXCESS FARE type="number" [(ngModel)]="EFT.EXCESS_FARE"></ion-input>
      </ion-item>
      <b ion-text *ngIf = "EFT.ERRORS.EXCESS_FARE" color=danger>{{ EFT.ERRORS.EXCESS_FARE }}</b>

      <ion-item>
        <ion-label color=primary>TOTAL:</ion-label>
        <ion-input placeholder ="Total" type="number" [(ngModel)] = "EFT.TOTAL"></ion-input>
      </ion-item>
    </ion-list>
  </ion-card>
  
  <ion-card>
    <ion-row>
      <ion-col>
          NAME
      </ion-col>
      <ion-col>
          AGE
      </ion-col>
      <ion-col>
          SEX
      </ion-col>
      <ion-col>
          BERTH
      </ion-col>
    </ion-row>
  
    <ion-row *ngFor="let item of EFT.PSGNLIST; let i=index">
        <ion-col>
            <ion-input placeholder="Name" [(ngModel)]="EFT.PSGNLIST[i].NAME"></ion-input>
        </ion-col>
        <ion-col>
            <ion-input type="text" placeholder="Age" [(ngModel)]="EFT.PSGNLIST[i].AGE"></ion-input>
        </ion-col>
        <ion-col>
          <ion-select style="max-width:100%" interface="popover" placeholder="Sex" [(ngModel)]="EFT.PSGNLIST[i].SEX">
            <ion-option [value]="M">M</ion-option>
            <ion-option [value]="F">F</ion-option>
            <ion-option [value]="O">O</ion-option>
          </ion-select>
        </ion-col>
        <ion-col col-5>
          <ion-select  style="max-width:100%" interface="popover" placeholder="BSD" [(ngModel)]="EFT.PSGNLIST[i].BSD">
            <ion-option value="S">Standing</ion-option>
            <ion-option no-padding *ngFor="let item of berthArr" [value]="item">{{item.json.COACH_ID + '-' +item.json.BERTH_INDEX + '-' + item.json.SRC + '-' + item.json.DEST}}</ion-option>
          </ion-select>
        </ion-col>
    </ion-row>
  </ion-card>

  <ion-card>
    <button  ion-button full (click)="scanEFT();">Submit</button>
  </ion-card> 
</ion-content>